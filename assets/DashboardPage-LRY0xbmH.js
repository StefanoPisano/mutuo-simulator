import{b as c,j as s,P as C,M as A,c as j,S as R,A as V}from"./mui-DEcKA50n.js";import{C as E}from"./Card-BlDEmDug.js";import{u as w}from"./index-vk8Nt5_2.js";const T=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16)),m=({label:e,name:g,symbol:t,placeholder:b,inputType:u,inputStep:a=1,disabled:n=!1,min:y,max:v,value:h,onChange:r})=>{const[d,f]=c.useState({hasError:!1}),p=o=>{if(r){const i=r(o.target.value,g);f(i)}},l=e.replaceAll(" ","").trim().concat(T());return s.jsxs("div",{children:[s.jsx("label",{className:"font-bold text-yimin-blue whitespace-nowrap text-sm mb-1",htmlFor:l,children:e}),s.jsxs("div",{className:"flex items-center justify-center border border-gray-300 bg-antiflash-white rounded-md h-10",children:[t&&s.jsx("span",{className:"flex justify-center w-12",children:u==="range"?h.value:t==="%"?s.jsx(C,{fontSize:"small"}):s.jsx(A,{fontSize:"small"})}),u==="range"?s.jsx("input",{type:u,id:l,step:a,disabled:n,value:h.value,min:y,max:v,onChange:p,className:`
          block
          w-full
          p-2
          border border-gray-300
          rounded-md
          focus:outline-none
          focus:ring-2
          focus:ring-yimin-blue-500
          focus:border-yimin-blue-500
          placeholder:text-xs
          placeholder:italic
        `}):s.jsx("input",{type:u,id:l,placeholder:b,disabled:n,value:h.value,onChange:p,className:`
          block
          w-full
          md:w-36
          p-2
          border border-gray-300
          rounded-md
          focus:outline-none
          focus:ring-2
          focus:ring-yimin-blue-500
          focus:border-yimin-blue-500
          placeholder:text-xs
          placeholder:italic
        `})]}),d.hasError&&s.jsx("div",{className:"text-xs m-1 p-1 border-gray-300 bg-antiflash-white rounded-md text-chocolate-cosmos font-bold",children:d.msg})]})},S=({inputData:e})=>{const{t:g}=w(["translation"]),t={mortgageDepositEstimate:0,bankAssessmentEstimate:0,substituteTaxEstimate:0,brokerEstimate:0,notaryEstimate:0,agencyEstimate:0,tcmPolicy:0,appraisal:0,fireAndExplosion:0,extra:0},[b,u]=c.useState(t),a=(l,o)=>{u(i=>({...i,[l]:o}))},n=l=>!!l.value&&l.isValid&&!isNaN(l.value);c.useEffect(()=>{n(e.fireAndExplosion)?a("fireAndExplosion",e.fireAndExplosion.value):a("fireAndExplosion",0),n(e.appraisal)?a("appraisal",e.appraisal.value):a("appraisal",0),n(e.extra)?a("extra",e.extra.value):a("extra",0),n(e.tcmPolicy)?a("tcmPolicy",e.tcmPolicy.value):a("tcmPolicy",0)},[e.fireAndExplosion,e.appraisal,e.extra,e.tcmPolicy]),c.useEffect(()=>{const l=n(e.agencyRate),o=n(e.budget);if(l&&o){const i=e.agencyRate.unit==="percentage"?e.agencyRate.value*e.budget.value/100:parseFloat(String(e.agencyRate.value)),x=.22*i;a("agencyEstimate",Number((i+x).toFixed(2)))}else a("agencyEstimate",0)},[e.mortgageDuration,e.budget,e.bankRate,e.agencyRate]),c.useEffect(()=>{const l=n(e.mortgage),o=n(e.budget);if(l&&o){const i=y(e.budget.value,e.mortgage.value);a("mortgageDepositEstimate",i)}else a("mortgageDepositEstimate",0)},[e.mortgage,e.budget]);const y=(l,o)=>l-l*o/100;c.useEffect(()=>{const l=n(e.mortgage),o=n(e.budget),i=n(e.bankAssessment);if(l&&o&&i){const x=e.bankAssessment.unit==="percentage"?e.bankAssessment.value*(e.budget.value*e.mortgage.value/100)/100:e.bankAssessment.value;a("bankAssessmentEstimate",parseFloat(String(x)))}else a("bankAssessmentEstimate",0)},[e.mortgage,e.budget,e.bankAssessment]),c.useEffect(()=>{const l=n(e.mortgage),o=n(e.budget),i=n(e.substituteTax);if(l&&o&&i){const x=e.substituteTax.value*(e.budget.value*e.mortgage.value/100)/100;a("substituteTaxEstimate",x)}else a("substituteTaxEstimate",0)},[e.mortgage,e.budget,e.substituteTax]),c.useEffect(()=>{const l=n(e.mortgage),o=n(e.budget),i=n(e.broker);if(l&&o&&i){const x=e.broker.unit==="percentage"?e.broker.value*(e.budget.value*e.mortgage.value/100)/100:e.broker.value;a("brokerEstimate",parseFloat(String(x)))}else a("brokerEstimate",0)},[e.mortgage,e.budget,e.broker]),c.useEffect(()=>{n(e.notary)?a("notaryEstimate",parseFloat(String(e.notary.value))):a("notaryEstimate",0)},[e.notary]),c.useEffect(()=>{const l=n(e.monthlyRate),o=n(e.budget),i=n(e.numberOfInstallments),x=n(e.mortgage);if(l&&o&&i&&x){const N=(e.budget.value-y(e.budget.value,e.mortgage.value))*(e.monthlyRate.value*Math.pow(1+e.monthlyRate.value,e.numberOfInstallments.value)/(Math.pow(1+e.monthlyRate.value,e.numberOfInstallments.value)-1));r(parseFloat(N.toFixed(2)))}else r(0)},[e.monthlyRate,e.numberOfInstallments,e.mortgage,e.budget]);const v=()=>e.budget.value&&parseFloat(String(e.budget.value))>0?Object.values(b).map(l=>parseFloat(l)).filter(l=>!isNaN(l)).reduce((l,o)=>l+o,0):0,[h,r]=c.useState(0),[d,f]=c.useState(v());c.useEffect(()=>{f(v())},[b]);const p=[{key:"agencyEstimate",label:"agency.label"},{key:"mortgageDepositEstimate",label:"mortgageDeposit.label"},{key:"bankAssessmentEstimate",label:"bankAssessment.label"},{key:"substituteTaxEstimate",label:"substituteTax.label"},{key:"brokerEstimate",label:"broker.label"},{key:"notaryEstimate",label:"notary.label"}];return s.jsx(s.Fragment,{children:s.jsxs(E,{title:g("estimate.title"),children:[s.jsx("div",{className:"flex flex-row flex-wrap lg:grid lg:grid-cols-6 gap-5 mt-10 justify-center",children:p.map(({key:l,label:o})=>s.jsxs("div",{className:"flex flex-col bg-yimin-blue text-center font-bold w-full lg:w-auto rounded-xl p-2 items-center",children:[s.jsx("span",{className:"text-antiflash-white text-xs",children:g(`estimate.${o}`)}),s.jsxs("div",{className:"text-coral italic text-xl",children:[b[l].toFixed(2)," ",s.jsx(j,{})]})]},l))}),s.jsxs("div",{className:"flex flex-col md:flex-row flex-auto gap-10 mt-20 justify-center",children:[s.jsxs("div",{className:"flex bg-yimin-blue text-center font-bold w-full md:w-2/5 rounded-xl p-2 items-center",children:[s.jsx("div",{className:"basis-1/5 text-antiflash-white",children:s.jsx(R,{fontSize:"large"})}),s.jsxs("div",{className:"basis-3/5",children:[s.jsx("span",{className:"text-antiflash-white text-2xl",children:g("estimate.initialInvestment.label")}),s.jsxs("div",{className:"text-coral italic text-3xl",children:["~ ",d.toFixed(2)," ",s.jsx(j,{fontSize:"large"})]})]}),s.jsx("div",{className:"basis-1/5"})]}),s.jsxs("div",{className:"flex bg-yimin-blue text-center font-bold w-full md:w-2/5 rounded-xl p-2 items-center ",children:[s.jsx("div",{className:"basis-1/5 text-antiflash-white",children:s.jsx(V,{fontSize:"large"})}),s.jsxs("div",{className:"basis-3/5",children:[s.jsx("span",{className:"text-antiflash-white text-2xl",children:g("estimate.mortgagePayment.label")}),s.jsxs("div",{className:"text-coral italic text-3xl",children:["~ ",h.toFixed(2)," ",s.jsx(j,{fontSize:"large"})]})]}),s.jsx("div",{className:"basis-1/5"})]})]})]})})},k=({label:e,name:g,disabled:t=!1,checked:b,onChange:u})=>{const a=n=>{u&&u(n.target.checked,g)};return s.jsxs("div",{children:[s.jsx("label",{className:"font-bold text-yimin-blue whitespace-nowrap text-sm mb-1",htmlFor:e,children:e}),s.jsx("div",{className:"flex items-center justify-center border border-gray-300 bg-antiflash-white rounded-md h-10",children:s.jsx("input",{type:"checkbox",id:e,disabled:t,checked:b,onChange:a,className:`
          block
          w-full
          p-2
          border border-gray-300
          rounded-md
          focus:outline-none
          focus:ring-2
          focus:ring-yimin-blue-500
          focus:border-yimin-blue-500
          placeholder:text-xs
          placeholder:italic
        `})})]})},I=()=>{const{t:e}=w(["translation"]),g={agencyRate:{isValid:!0,value:4,unit:"percentage"},bankRate:{isValid:!0,value:3.2,unit:"percentage"},monthlyRate:{isValid:!0,value:0,unit:"percentage"},numberOfInstallments:{isValid:!0,value:360,unit:"total"},mortgageDuration:{isValid:!0,value:30,unit:"duration"},budget:{isValid:!0,value:0,unit:"currency"},mortgage:{isValid:!0,value:80,unit:"percentage"},bankAssessment:{isValid:!0,value:1,unit:"percentage"},appraisal:{isValid:!0,value:350,unit:"percentage"},substituteTax:{isValid:!0,value:.25,unit:"percentage"},fireAndExplosion:{isValid:!0,value:2177,unit:"currency"},tcmPolicy:{isValid:!0,value:0,unit:"currency"},notary:{isValid:!0,value:5e3,unit:"currency"},extra:{isValid:!0,value:0,unit:"currency"},broker:{isValid:!0,value:0,unit:"percentage"},currency:{isValid:!0,value:"â‚¬",unit:"none"}},[t,b]=c.useState(g),u=(r,d)=>{b(f=>({...f,[r]:d}))},a=(r,d)=>{const f=y(r,d);return u(d,{isValid:!f.hasError,value:r,unit:t[d].unit}),f},n=(r,d)=>{switch(d){case"bankAssessment":case"broker":case"agencyRate":u(d,{value:0,unit:r?"currency":"percentage",isValid:!0})}},y=(r,d)=>{switch(t[d].unit){case"percentage":return isNaN(r)||r>100||r<0?{hasError:!0,msg:"Invalid percentage"}:{hasError:!1};default:return isNaN(r)||r<0?{hasError:!0,msg:"Must be a number greater than 0"}:{hasError:!1}}};c.useEffect(()=>{const r=h(t.bankRate.value);u("monthlyRate",{isValid:!0,value:r,unit:t.bankRate.unit})},[t.bankRate]),c.useEffect(()=>{if(t.mortgageDuration.isValid){const r=v(t.mortgageDuration.value);u("numberOfInstallments",{isValid:!0,value:r,unit:t.mortgageDuration.unit})}else u("numberOfInstallments",{isValid:!1,value:0,unit:t.mortgageDuration.unit})},[t.mortgageDuration]);const v=r=>r?parseInt((r*12).toFixed(0)):0,h=r=>r?r/100/12:0;return s.jsx("div",{className:"w-full h-full flex flex-col md:flex-row gap-4 md:gap-10",children:s.jsxs("div",{className:"p-4 md:p-8 basis-full",children:[s.jsx(E,{title:e("budget.title"),children:s.jsx("div",{className:"flex justify-center gap-2",children:s.jsx(m,{label:e("budget.homePrice.label"),placeholder:e("budget.homePrice.placeholder"),symbol:t.currency.value,inputType:"text",value:t.budget,name:"budget",onChange:a})})}),s.jsxs(E,{title:e("configuration.title"),children:[s.jsxs("div",{className:"flex flex-col md:flex-row m-auto justify-center gap-4 md:gap-2",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 basis-full md:basis-1/3 p-1.5 br border rounded-xl border-gray-300 items-center md:items-stretch",children:[s.jsxs("div",{className:"flex flex-row gap-2 w-full items-end justify-center",children:[s.jsx(k,{label:"Fixed Rate",checked:t.agencyRate.unit==="currency",name:"agencyRate",disabled:!1,onChange:n}),s.jsx(m,{label:e("configuration.realEstateAgency.label"),symbol:t.agencyRate.unit==="currency"?t.currency.value:"%",placeholder:e("configuration.realEstateAgency.placeholder"),inputType:"text",value:t.agencyRate,name:"agencyRate",disabled:!1,onChange:a})]}),s.jsxs("div",{className:"flex flex-row gap-2 w-full items-end justify-center",children:[s.jsx(k,{label:"Fixed Rate",checked:t.broker.unit==="currency",name:"broker",disabled:!1,onChange:n}),s.jsx(m,{label:e("configuration.broker.label"),placeholder:e("configuration.broker.placeholder"),symbol:t.broker.unit==="currency"?t.currency.value:"%",inputType:"text",value:t.broker,name:"broker",disabled:!1,onChange:a})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 basis-full md:basis-1/3 p-1.5 justify-center border rounded-xl border-gray-300 items-center md:items-stretch",children:[s.jsx(m,{label:e("configuration.mortgage.label"),placeholder:e("configuration.mortgage.placeholder"),symbol:"%",inputType:"range",value:t.mortgage,inputStep:1,min:0,max:100,disabled:!1,name:"mortgage",onChange:a}),s.jsx(m,{label:e("configuration.bankRate.label"),placeholder:e("configuration.bankRate.placeholder"),symbol:"%",inputType:"range",value:t.bankRate,inputStep:.01,min:0,max:10,disabled:!1,name:"bankRate",onChange:a}),s.jsx(m,{label:e("configuration.mortgageDuration.label"),placeholder:e("configuration.mortgageDuration.placeholder"),symbol:"Y",inputType:"range",value:t.mortgageDuration,inputStep:1,min:0,max:30,name:"mortgageDuration",disabled:!1,onChange:a})]})]}),s.jsx("div",{className:"flex flex-col md:flex-row m-auto mt-4 mb-4 justify-center w-full md:w-fit",children:s.jsx("div",{className:"flex flex-col md:flex-row gap-4 p-1.5 border rounded-xl border-gray-300 items-center md:items-stretch w-full",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-2 w-full items-center justify-center flex-wrap",children:[s.jsxs("div",{className:"flex flex-row gap-2 items-end",children:[s.jsx(k,{label:"Fixed Rate",checked:t.bankAssessment.unit==="currency",name:"bankAssessment",disabled:!1,onChange:n}),s.jsx(m,{label:e("configuration.bankAssessment.label"),symbol:t.bankAssessment.unit==="currency"?t.currency.value:"%",placeholder:e("configuration.bankAssessment.placeholder"),inputType:"text",value:t.bankAssessment,name:"bankAssessment",disabled:!1,onChange:a})]}),s.jsx(m,{label:e("configuration.appraisal.label"),placeholder:e("configuration.appraisal.placeholder"),symbol:t.currency.value,inputType:"text",value:t.appraisal,name:"appraisal",disabled:!1,onChange:a}),s.jsx(m,{label:e("configuration.substituteTax.label"),placeholder:e("configuration.substituteTax.placeholder"),symbol:"%",inputType:"text",value:t.substituteTax,name:"substituteTax",disabled:!1,onChange:a}),s.jsx(m,{label:e("configuration.fireAndExplosion.label"),placeholder:e("configuration.fireAndExplosion.placeholder"),symbol:t.currency.value,inputType:"text",value:t.fireAndExplosion,name:"fireAndExplosion",disabled:!1,onChange:a}),s.jsx(m,{label:e("configuration.tcmPolicy.label"),placeholder:e("configuration.tcmPolicy.placeholder"),symbol:t.currency.value,inputType:"text",value:t.tcmPolicy,name:"tcmPolicy",disabled:!1,onChange:a})]})})}),s.jsx("div",{className:"flex flex-col md:flex-row m-auto mt-4 mb-4 justify-center w-full md:w-1/2 gap-4 ",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 basis-full md:basis-1/2 p-1.5 border rounded-xl border-gray-300 items-center md:items-stretch",children:[s.jsx(m,{label:e("configuration.notary.label"),placeholder:e("configuration.notary.placeholder"),symbol:t.currency.value,inputType:"text",value:t.notary,name:"notary",disabled:!1,onChange:a}),s.jsx(m,{label:e("configuration.extra.label"),placeholder:e("configuration.extra.placeholder"),symbol:t.currency.value,inputType:"text",value:t.extra,name:"extra",disabled:!1,onChange:a})]})})]}),s.jsx(S,{inputData:t})]})})},O=()=>s.jsx("div",{children:s.jsx(I,{})});export{O as default};
