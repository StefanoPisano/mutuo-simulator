import{b as i,j as t,P as A,M as R,c as k,S as V,A as T}from"./mui-DEcKA50n.js";import{C as w}from"./Card-BlDEmDug.js";import{u as N}from"./index-CILdTmyl.js";const I=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16)),p=e=>e.replaceAll(" ","").trim().concat(I()),m=({label:e,name:g,symbol:s,placeholder:b,inputType:c,inputStep:a=1,disabled:n=!1,min:y,max:v,value:h,onChange:r})=>{const[u,f]=i.useState({hasError:!1}),j=l=>{if(r){const o=r(l.target.value,g);f(o)}};return t.jsxs("div",{children:[t.jsx("label",{className:"font-bold text-yimin-blue whitespace-nowrap text-sm mb-1",htmlFor:p(e),children:e}),t.jsxs("div",{className:"flex items-center justify-center border  bg-antiflash-white rounded-md h-10",children:[s&&t.jsx("span",{className:"flex justify-center w-12",children:c==="range"?h.value:s==="%"?t.jsx(A,{fontSize:"small"}):t.jsx(R,{fontSize:"small"})}),c==="range"?t.jsx("input",{type:c,id:p(e),step:a,disabled:n,value:h.value,min:y,max:v,onChange:j,className:`
          block
          flex-1
          rounded-md
          focus:outline-none
          focus:ring-2
          focus:ring-yimin-blue-500
          focus:border-yimin-blue-500
          placeholder:text-xs
          placeholder:italic
        `}):t.jsx("input",{type:c,id:p(e),placeholder:b,disabled:n,value:h.value,onChange:j,className:`
          block
          w-full
          p-2
          md:w-36
          border border-gray-300
          rounded-md
          focus:outline-none
          focus:ring-2
          focus:ring-yimin-blue-500
          focus:border-yimin-blue-500
          placeholder:text-xs
          placeholder:italic
        `})]}),u.hasError&&t.jsx("div",{className:"text-xs m-1 p-1 border-gray-300 bg-antiflash-white rounded-md text-chocolate-cosmos font-bold",children:u.msg})]})},S=({inputData:e})=>{const{t:g}=N(["translation"]),s={mortgageDepositEstimate:0,bankAssessmentEstimate:0,substituteTaxEstimate:0,brokerEstimate:0,notaryEstimate:0,agencyEstimate:0,tcmPolicy:0,appraisal:0,fireAndExplosion:0,extra:0},[b,c]=i.useState(s),a=(l,o)=>{c(d=>({...d,[l]:o}))},n=l=>!!l.value&&l.isValid&&!isNaN(l.value);i.useEffect(()=>{n(e.fireAndExplosion)?a("fireAndExplosion",e.fireAndExplosion.value):a("fireAndExplosion",0),n(e.appraisal)?a("appraisal",e.appraisal.value):a("appraisal",0),n(e.extra)?a("extra",e.extra.value):a("extra",0),n(e.tcmPolicy)?a("tcmPolicy",e.tcmPolicy.value):a("tcmPolicy",0)},[e.fireAndExplosion,e.appraisal,e.extra,e.tcmPolicy]),i.useEffect(()=>{const l=n(e.agencyRate),o=n(e.budget);if(l&&o){const d=e.agencyRate.unit==="percentage"?e.agencyRate.value*e.budget.value/100:parseFloat(String(e.agencyRate.value)),x=.22*d;a("agencyEstimate",Number((d+x).toFixed(2)))}else a("agencyEstimate",0)},[e.mortgageDuration,e.budget,e.bankRate,e.agencyRate]),i.useEffect(()=>{const l=n(e.mortgage),o=n(e.budget);if(l&&o){const d=y(e.budget.value,e.mortgage.value);a("mortgageDepositEstimate",d)}else a("mortgageDepositEstimate",0)},[e.mortgage,e.budget]);const y=(l,o)=>l-l*o/100;i.useEffect(()=>{const l=n(e.mortgage),o=n(e.budget),d=n(e.bankAssessment);if(l&&o&&d){const x=e.bankAssessment.unit==="percentage"?e.bankAssessment.value*(e.budget.value*e.mortgage.value/100)/100:e.bankAssessment.value;a("bankAssessmentEstimate",parseFloat(String(x)))}else a("bankAssessmentEstimate",0)},[e.mortgage,e.budget,e.bankAssessment]),i.useEffect(()=>{const l=n(e.mortgage),o=n(e.budget),d=n(e.substituteTax);if(l&&o&&d){const x=e.substituteTax.value*(e.budget.value*e.mortgage.value/100)/100;a("substituteTaxEstimate",x)}else a("substituteTaxEstimate",0)},[e.mortgage,e.budget,e.substituteTax]),i.useEffect(()=>{const l=n(e.mortgage),o=n(e.budget),d=n(e.broker);if(l&&o&&d){const x=e.broker.unit==="percentage"?e.broker.value*(e.budget.value*e.mortgage.value/100)/100:e.broker.value;a("brokerEstimate",parseFloat(String(x)))}else a("brokerEstimate",0)},[e.mortgage,e.budget,e.broker]),i.useEffect(()=>{n(e.notary)?a("notaryEstimate",parseFloat(String(e.notary.value))):a("notaryEstimate",0)},[e.notary]),i.useEffect(()=>{const l=n(e.monthlyRate),o=n(e.budget),d=n(e.numberOfInstallments),x=n(e.mortgage);if(l&&o&&d&&x){const C=(e.budget.value-y(e.budget.value,e.mortgage.value))*(e.monthlyRate.value*Math.pow(1+e.monthlyRate.value,e.numberOfInstallments.value)/(Math.pow(1+e.monthlyRate.value,e.numberOfInstallments.value)-1));r(parseFloat(C.toFixed(2)))}else r(0)},[e.monthlyRate,e.numberOfInstallments,e.mortgage,e.budget]);const v=()=>e.budget.value&&parseFloat(String(e.budget.value))>0?Object.values(b).map(l=>parseFloat(l)).filter(l=>!isNaN(l)).reduce((l,o)=>l+o,0):0,[h,r]=i.useState(0),[u,f]=i.useState(v());i.useEffect(()=>{f(v())},[b]);const j=[{key:"agencyEstimate",label:"agency.label"},{key:"mortgageDepositEstimate",label:"mortgageDeposit.label"},{key:"bankAssessmentEstimate",label:"bankAssessment.label"},{key:"substituteTaxEstimate",label:"substituteTax.label"},{key:"brokerEstimate",label:"broker.label"},{key:"notaryEstimate",label:"notary.label"}];return t.jsx(t.Fragment,{children:t.jsxs(w,{title:g("estimate.title"),children:[t.jsx("div",{className:"flex flex-row flex-wrap lg:grid lg:grid-cols-6 gap-5 mt-10 justify-center",children:j.map(({key:l,label:o})=>t.jsxs("div",{className:"flex flex-col bg-yimin-blue text-center font-bold w-full lg:w-auto rounded-xl p-2 items-center",children:[t.jsx("span",{className:"text-antiflash-white text-xs",children:g(`estimate.${o}`)}),t.jsxs("div",{className:"text-coral italic text-xl",children:[b[l].toFixed(2)," ",t.jsx(k,{})]})]},l))}),t.jsxs("div",{className:"flex flex-col md:flex-row flex-auto gap-10 mt-20 justify-center",children:[t.jsxs("div",{className:"flex bg-yimin-blue text-center font-bold w-full md:w-2/5 rounded-xl p-2 items-center",children:[t.jsx("div",{className:"basis-1/5 text-antiflash-white",children:t.jsx(V,{fontSize:"large"})}),t.jsxs("div",{className:"basis-3/5",children:[t.jsx("span",{className:"text-antiflash-white text-2xl",children:g("estimate.initialInvestment.label")}),t.jsxs("div",{className:"text-coral italic text-3xl",children:["~ ",u.toFixed(2)," ",t.jsx(k,{fontSize:"large"})]})]}),t.jsx("div",{className:"basis-1/5"})]}),t.jsxs("div",{className:"flex bg-yimin-blue text-center font-bold w-full md:w-2/5 rounded-xl p-2 items-center ",children:[t.jsx("div",{className:"basis-1/5 text-antiflash-white",children:t.jsx(T,{fontSize:"large"})}),t.jsxs("div",{className:"basis-3/5",children:[t.jsx("span",{className:"text-antiflash-white text-2xl",children:g("estimate.mortgagePayment.label")}),t.jsxs("div",{className:"text-coral italic text-3xl",children:["~ ",h.toFixed(2)," ",t.jsx(k,{fontSize:"large"})]})]}),t.jsx("div",{className:"basis-1/5"})]})]})]})})},E=({label:e,name:g,disabled:s=!1,checked:b,onChange:c})=>{const a=n=>{c&&c(n.target.checked,g)};return t.jsxs("div",{children:[t.jsx("label",{className:"font-bold text-yimin-blue whitespace-nowrap text-sm mb-1",htmlFor:p(e),children:e}),t.jsx("div",{className:"flex items-center justify-center border border-gray-300 bg-antiflash-white rounded-md h-10",children:t.jsx("input",{type:"checkbox",id:p(e),disabled:s,checked:b,onChange:a,className:`
          p-2
          border border-gray-300
          rounded-md
          focus:outline-none
          focus:ring-2
          focus:ring-yimin-blue-500
          focus:border-yimin-blue-500
          placeholder:text-xs
          placeholder:italic
        `})})]})},F=()=>{const{t:e}=N(["translation"]),g={agencyRate:{isValid:!0,value:4,unit:"percentage"},bankRate:{isValid:!0,value:3.2,unit:"total"},monthlyRate:{isValid:!0,value:0,unit:"percentage"},numberOfInstallments:{isValid:!0,value:360,unit:"total"},mortgageDuration:{isValid:!0,value:30,unit:"duration"},budget:{isValid:!0,value:0,unit:"currency"},mortgage:{isValid:!0,value:80,unit:"percentage"},bankAssessment:{isValid:!0,value:1,unit:"percentage"},appraisal:{isValid:!0,value:350,unit:"percentage"},substituteTax:{isValid:!0,value:.25,unit:"percentage"},fireAndExplosion:{isValid:!0,value:2177,unit:"currency"},tcmPolicy:{isValid:!0,value:0,unit:"currency"},notary:{isValid:!0,value:5e3,unit:"currency"},extra:{isValid:!0,value:0,unit:"currency"},broker:{isValid:!0,value:0,unit:"percentage"},currency:{isValid:!0,value:"â‚¬",unit:"none"}},[s,b]=i.useState(g),c=(r,u)=>{b(f=>({...f,[r]:u}))},a=(r,u)=>{const f=y(r,u);return c(u,{isValid:!f.hasError,value:r,unit:s[u].unit}),f},n=(r,u)=>{switch(u){case"bankAssessment":case"broker":case"agencyRate":c(u,{value:0,unit:r?"currency":"percentage",isValid:!0})}},y=(r,u)=>{switch(s[u].unit){case"percentage":return isNaN(r)||r>100||r<0?{hasError:!0,msg:"Invalid percentage"}:{hasError:!1};default:return isNaN(r)||r<0?{hasError:!0,msg:"Must be a number greater than 0"}:{hasError:!1}}};i.useEffect(()=>{const r=h(s.bankRate.value);c("monthlyRate",{isValid:!0,value:r,unit:s.bankRate.unit})},[s.bankRate]),i.useEffect(()=>{if(s.mortgageDuration.isValid){const r=v(s.mortgageDuration.value);c("numberOfInstallments",{isValid:!0,value:r,unit:s.mortgageDuration.unit})}else c("numberOfInstallments",{isValid:!1,value:0,unit:s.mortgageDuration.unit})},[s.mortgageDuration]);const v=r=>r?parseInt((r*12).toFixed(0)):0,h=r=>r?r/100/12:0;return t.jsx("div",{className:"w-full h-full flex flex-col md:flex-row gap-4 md:gap-10",children:t.jsxs("div",{className:"p-4 md:p-8 basis-full",children:[t.jsx(w,{title:e("budget.title"),children:t.jsx("div",{className:"flex justify-center gap-2 w-full",children:t.jsx(m,{label:e("budget.homePrice.label"),placeholder:e("budget.homePrice.placeholder"),symbol:s.currency.value,inputType:"text",value:s.budget,name:"budget",onChange:a})})}),t.jsxs(w,{title:e("configuration.title"),children:[t.jsxs("div",{className:"flex flex-col md:flex-row m-auto justify-center gap-4 md:gap-2",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 basis-full md:basis-1/3 p-1.5 br border rounded-xl border-gray-300 items-center md:items-stretch",children:[t.jsxs("div",{className:"flex flex-row gap-2 w-full items-end justify-center",children:[t.jsx(E,{label:"Fixed Rate",checked:s.agencyRate.unit==="currency",name:"agencyRate",disabled:!1,onChange:n}),t.jsx(m,{label:e("configuration.realEstateAgency.label"),symbol:s.agencyRate.unit==="currency"?s.currency.value:"%",placeholder:e("configuration.realEstateAgency.placeholder"),inputType:"text",value:s.agencyRate,name:"agencyRate",disabled:!1,onChange:a})]}),t.jsxs("div",{className:"flex flex-row gap-2 w-full items-end justify-center",children:[t.jsx(E,{label:"Fixed Rate",checked:s.broker.unit==="currency",name:"broker",disabled:!1,onChange:n}),t.jsx(m,{label:e("configuration.broker.label"),placeholder:e("configuration.broker.placeholder"),symbol:s.broker.unit==="currency"?s.currency.value:"%",inputType:"text",value:s.broker,name:"broker",disabled:!1,onChange:a})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 basis-full md:basis-1/3 p-1.5 justify-center border rounded-xl border-gray-300 items-center md:items-stretch",children:[t.jsx(m,{label:e("configuration.bankRate.label"),placeholder:e("configuration.bankRate.placeholder"),symbol:"%",inputType:"text",value:s.bankRate,disabled:!1,name:"bankRate",onChange:a}),t.jsx(m,{label:e("configuration.mortgage.label"),placeholder:e("configuration.mortgage.placeholder"),symbol:"%",inputType:"range",value:s.mortgage,inputStep:1,min:0,max:100,disabled:!1,name:"mortgage",onChange:a}),t.jsx(m,{label:e("configuration.mortgageDuration.label"),placeholder:e("configuration.mortgageDuration.placeholder"),symbol:"Y",inputType:"range",value:s.mortgageDuration,inputStep:1,min:0,max:30,name:"mortgageDuration",disabled:!1,onChange:a})]})]}),t.jsx("div",{className:"flex flex-col md:flex-row m-auto mt-4 mb-4 justify-center w-full md:w-fit",children:t.jsx("div",{className:"flex flex-col md:flex-row gap-4 p-1.5 border rounded-xl border-gray-300 items-center md:items-stretch w-full",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-2 w-full items-center justify-center flex-wrap",children:[t.jsxs("div",{className:"flex flex-row gap-2 items-end",children:[t.jsx(E,{label:"Fixed Rate",checked:s.bankAssessment.unit==="currency",name:"bankAssessment",disabled:!1,onChange:n}),t.jsx(m,{label:e("configuration.bankAssessment.label"),symbol:s.bankAssessment.unit==="currency"?s.currency.value:"%",placeholder:e("configuration.bankAssessment.placeholder"),inputType:"text",value:s.bankAssessment,name:"bankAssessment",disabled:!1,onChange:a})]}),t.jsx(m,{label:e("configuration.appraisal.label"),placeholder:e("configuration.appraisal.placeholder"),symbol:s.currency.value,inputType:"text",value:s.appraisal,name:"appraisal",disabled:!1,onChange:a}),t.jsx(m,{label:e("configuration.substituteTax.label"),placeholder:e("configuration.substituteTax.placeholder"),symbol:"%",inputType:"text",value:s.substituteTax,name:"substituteTax",disabled:!1,onChange:a}),t.jsx(m,{label:e("configuration.fireAndExplosion.label"),placeholder:e("configuration.fireAndExplosion.placeholder"),symbol:s.currency.value,inputType:"text",value:s.fireAndExplosion,name:"fireAndExplosion",disabled:!1,onChange:a}),t.jsx(m,{label:e("configuration.tcmPolicy.label"),placeholder:e("configuration.tcmPolicy.placeholder"),symbol:s.currency.value,inputType:"text",value:s.tcmPolicy,name:"tcmPolicy",disabled:!1,onChange:a})]})})}),t.jsx("div",{className:"flex flex-col md:flex-row m-auto mt-4 mb-4 justify-center w-full md:w-1/2 gap-4 ",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 basis-full md:basis-1/2 p-1.5 border rounded-xl border-gray-300 items-center md:items-stretch",children:[t.jsx(m,{label:e("configuration.notary.label"),placeholder:e("configuration.notary.placeholder"),symbol:s.currency.value,inputType:"text",value:s.notary,name:"notary",disabled:!1,onChange:a}),t.jsx(m,{label:e("configuration.extra.label"),placeholder:e("configuration.extra.placeholder"),symbol:s.currency.value,inputType:"text",value:s.extra,name:"extra",disabled:!1,onChange:a})]})})]}),t.jsx(S,{inputData:s})]})})},z=()=>t.jsx("div",{children:t.jsx(F,{})});export{z as default};
